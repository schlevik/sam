train-roberta-base-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path roberta-base --model-type roberta --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/roberta-base-squad1 --do-eval-after-training --num-workers
    8 --fp16 --per-gpu-train-batch-size 8 --save-steps 0 --max-answer-length 30 --debug-features
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/roberta-base-squad1
    md5: 223be1b1d0dba22ed9985bc1e200295e.dir
train-albert-base-v2-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path albert-base-v2 --model-type albert-base-v2 --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/albert-base-v2-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 24 --max-answer-length 30 --fp16 --save-steps 0 --debug-features
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  - path: scripts/train_transformers.py
    md5: b9df7e61041c54dfcf1fdc544fa86b9b
  outs:
  - path: models/albert-base-v2-squad1
    md5: ace9c8af69f8e73d97deac6a76c1d2a1.dir
train-albert-xxlarge-v2-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path albert-xxlarge-v2 --model-type albert-xxlarge-v2 --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/albert-xxlarge-v2-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 2 --max-answer-length 30 --gradient-accumulation-steps
    128 --fp16 --save-steps 0 --debug-features
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/albert-xxlarge-v2-squad1
    md5: ab4909936dc0ca044d631f0bf6408068.dir
train-bert-large-uncased-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path bert-large-uncased --model-type bert-large-uncased --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/bert-large-uncased-squad1 --do-eval-after-training
    --num-workers 8 --per-gpu-train-batch-size 2 --max-answer-length 30 --gradient-accumulation-steps
    128 --fp16 --save-steps 0 --debug-features
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/bert-large-uncased-squad1
    md5: 6ed53ddb2075786fffd3ea6530c8c506.dir
train-roberta-large-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path roberta-large --model-type roberta-large --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/roberta-large-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 8 --max-answer-length 30 --gradient-accumulation-steps
    32 --fp16 --save-steps 1000 --debug-features --eval-all-checkpoints
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/roberta-large-squad1
    md5: ec9a2c9e6e83cfc2dfa906623949fe06.dir
train-albert-large-v2-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path albert-large-v2 --model-type albert-large-v2 --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/albert-large-v2-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 8 --max-answer-length 30 --gradient-accumulation-steps
    32 --fp16 --debug-features --eval-all-checkpoints
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/albert-large-v2-squad1
    md5: d125f85b6cd80c44f1b1b8034c39740c.dir
train-albert-xlarge-v2-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path albert-xlarge-v2 --model-type albert-xlarge-v2 --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/albert-xlarge-v2-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 4 --max-answer-length 30 --gradient-accumulation-steps
    64 --fp16 --debug-features --eval-all-checkpoints
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/albert-xlarge-v2-squad1
    md5: c4db834be68c60375f5d72336b905502.dir
train-bert-base-uncased-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path bert-base-uncased --model-type bert-base-uncased --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/bert-base-uncased-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 32 --max-answer-length 30 --gradient-accumulation-steps
    8 --fp16 --debug-features --eval-all-checkpoints
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/bert-base-uncased-squad1
    md5: 0bc609c29bbd02bef8fce079fa320f6a.dir
train-t5-small-on-squad1:
  cmd: PYTHONPATH=. WANDB_NAME=dvc-t5-small-on-squad1 python scripts/t5.py --model_name_or_path
    t5-small --output_dir models/t5-small-squad1 --train_file data/datasets/squad1/train-v1.1.json
    --eval_file data/datasets/squad1/dev-v1.1.json --do_train --do_eval --num_workers
    8 --per_device_train_batch_size 32 --gradient_accumulation_steps 32 --fp16 --eval_all_checkpoints
    --learning_rate 0.001
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/t5-small-squad1
    md5: 8c1715252272ed2d3b9cef486fdbcba0.dir
train-t5-base-on-squad1:
  cmd: PYTHONPATH=. WANDB_NAME=dvc-t5-base-on-squad1-no-fp16 python scripts/t5.py
    --model_name_or_path t5-base --output_dir models/t5-base-squad1 --train_file data/datasets/squad1/train-v1.1.json
    --eval_file data/datasets/squad1/dev-v1.1.json --do_train --do_eval --num_workers
    8 --per_device_train_batch_size 6 --gradient_accumulation_steps 170 --eval_all_checkpoints
    --logging_steps 10 --save_steps 74 --learning_rate 0.001
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/t5-base-squad1
    md5: b339808496d3c739ae93dcf1e4aef5ea.dir
generate-train:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 56 --num-workers
    8 --do-save --out-path data/football/split/train/ --multiplier 100 --split train
    --combine
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split/train/combined-train.json
    md5: 70d3af4b992c9ecf2bd01bd3403b15c0
generate-train-mask-q:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 56 --num-workers
    8 --do-save --out-path data/football/split-mask-q/train/ --multiplier 100 --split
    train --combine --mask-q
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split-mask-q/train/combined-train.json
    md5: 29fd16f574d0363a8f457f9e873a1c27
generate-train-mask-p:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 56 --num-workers
    8 --do-save --out-path data/football/split-mask-p/train/ --multiplier 100 --split
    train --combine --mask-p --keep-answer-candidates
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split-mask-p/train/combined-train.json
    md5: f1dd5ed6cc05287d05b77e04fe99d805
generate-test-mask-q:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 38676 --num-workers
    8 --do-save --out-path data/football/split-mask-q/test/ --multiplier 20 --split
    test --mask-q
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split-mask-q/test/baseline-test.json
    md5: 63d660205ba99e2c9330e7d1e63e15b1
  - path: data/football/split-mask-q/test/control-test.json
    md5: 875aed3a9069ff649c418d95e4d7b57d
  - path: data/football/split-mask-q/test/intervention-test.json
    md5: 2fe124d70a610917c2f6ad6c26b6f9ff
generate-test-mask-p:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 38676 --num-workers
    8 --do-save --out-path data/football/split-mask-p/test/ --multiplier 20 --split
    test --mask-p --keep-answer-candidates
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split-mask-p/test/baseline-test.json
    md5: ed9e5c7fc588a0f4726e82c12edcf95f
  - path: data/football/split-mask-p/test/control-test.json
    md5: 24b3f1207449f5ad6a5403ad69bd5f6e
  - path: data/football/split-mask-p/test/intervention-test.json
    md5: 0546a3f31510080ed9795210a5799ff7
train-bert-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/football/split/train/combined-train.json
    --model-path bert-base-uncased --model-type bert --save-model-folder models/bert-baseline
    --num-workers 8 --per-gpu-train-batch-size 24 --max-answer-length 10 --debug-features
    --num-train-epochs 15 --overwrite-output-dir --save-steps 0 --per-gpu-eval-batch-size
    64 --gradient-accumulation-steps 3 --learning-rate 5e-5
  deps:
  - path: data/football/split/train/combined-train.json
    md5: 70d3af4b992c9ecf2bd01bd3403b15c0
  outs:
  - path: models/bert-baseline
    md5: 3c0dfec47e611a376084aa9f7541f5ad.dir
train-bert-mask-q-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/football/split-mask-q/train/combined-train.json
    --model-path bert-base-uncased --model-type bert --save-model-folder models/bert-mask-q-baseline
    --num-workers 8 --per-gpu-train-batch-size 24 --max-answer-length 10 --debug-features
    --num-train-epochs 15 --overwrite-output-dir --save-steps 0 --per-gpu-eval-batch-size
    64 --gradient-accumulation-steps 3 --learning-rate 5e-5
  deps:
  - path: data/football/split-mask-q/train/combined-train.json
    md5: 29fd16f574d0363a8f457f9e873a1c27
  outs:
  - path: models/bert-mask-q-baseline
    md5: ab6a3d3cbca3bc6e0c56da8b6e0d35e1.dir
train-bert-mask-p-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/football/split-mask-p/train/combined-train.json
    --model-path bert-base-uncased --model-type bert --save-model-folder models/bert-mask-p-baseline
    --num-workers 8 --per-gpu-train-batch-size 24 --max-answer-length 10 --debug-features
    --num-train-epochs 15 --overwrite-output-dir --save-steps 0 --per-gpu-eval-batch-size
    64 --gradient-accumulation-steps 3 --learning-rate 5e-5
  deps:
  - path: data/football/split-mask-p/train/combined-train.json
    md5: f1dd5ed6cc05287d05b77e04fe99d805
  outs:
  - path: models/bert-mask-p-baseline
    md5: 416506bd1b6cd5414dfd6a494469e9c6.dir
predict-random-baselines:
  cmd: python main.py predict data/football/split/test/baseline-test.json data/football/split/test/control-test.json
    data/football/split/test/intervention-test.json --output-folder data/football/split/test/predictions/
    --model random-baseline --cls RandomBaseline --model educated-baseline --cls EducatedBaseline
    --model informed-baseline --cls InformedBaseline
  deps:
  - path: data/football/split/test/baseline-test.json
    md5: dd4270113e8c4df1d87952704174b327
  - path: data/football/split/test/control-test.json
    md5: 21b540d35dc9a921efad2a96ef7fff72
  - path: data/football/split/test/intervention-test.json
    md5: 397e7a8e463ddf1d144193a8689c2875
  outs:
  - path: data/football/split/test/predictions/baseline-test-educated-baseline.json
    md5: 12c8c9005320ad4e849b468292a95b4c
  - path: data/football/split/test/predictions/baseline-test-informed-baseline.json
    md5: eb4ebd14e97115a8c71781862235f0a8
  - path: data/football/split/test/predictions/baseline-test-random-baseline.json
    md5: 6eef993984684bc2ecd5d68221918877
  - path: data/football/split/test/predictions/control-test-educated-baseline.json
    md5: 8603a8dba61c00493336e51569d235fd
  - path: data/football/split/test/predictions/control-test-informed-baseline.json
    md5: 0db12b23a7fadd8fcba4d003614abc0a
  - path: data/football/split/test/predictions/control-test-random-baseline.json
    md5: 2c629242cf401eb6231909ed99d9b7d9
  - path: data/football/split/test/predictions/intervention-test-educated-baseline.json
    md5: b7bd21be9eca161c6652d2661ce23057
  - path: data/football/split/test/predictions/intervention-test-informed-baseline.json
    md5: d3deb12ffdcaca070073b8fa7f0bf319
  - path: data/football/split/test/predictions/intervention-test-random-baseline.json
    md5: 312e2f4f92307d65cab7563cc10c3b4e
predict-bert-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk predictions
    data/football/split/test/baseline-test.json data/football/split/test/intervention-test.json
    data/football/split/test/control-test.json --model-path models/bert-baseline --model-type
    bert --out-folder data/football/split/test/predictions/ --max-answer-length 10
    --per-gpu-eval-batch-size 64
  deps:
  - path: data/football/split/test/baseline-test.json
    md5: dd4270113e8c4df1d87952704174b327
  - path: data/football/split/test/control-test.json
    md5: 21b540d35dc9a921efad2a96ef7fff72
  - path: data/football/split/test/intervention-test.json
    md5: 397e7a8e463ddf1d144193a8689c2875
  - path: models/bert-baseline
    md5: 3c0dfec47e611a376084aa9f7541f5ad.dir
  outs:
  - path: data/football/split/test/predictions/baseline-test-bert-baseline.json
    md5: a6fde403333da209b7a8342b1188afe0
  - path: data/football/split/test/predictions/control-test-bert-baseline.json
    md5: 8e3c0a8475665bbfa92466e1a7dfcc4d
  - path: data/football/split/test/predictions/intervention-test-bert-baseline.json
    md5: 1583304f8e292495282d9ab2cb3edd27
predict-bert-mask-q-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk predictions
    data/football/split-mask-q/test/baseline-test.json data/football/split-mask-q/test/intervention-test.json
    data/football/split-mask-q/test/control-test.json --model-path models/bert-mask-q-baseline
    --model-type bert --out-folder data/football/split-mask-q/test/predictions/ --max-answer-length
    10 --per-gpu-eval-batch-size 64
  deps:
  - path: data/football/split-mask-q/test/baseline-test.json
    md5: 63d660205ba99e2c9330e7d1e63e15b1
  - path: data/football/split-mask-q/test/control-test.json
    md5: 875aed3a9069ff649c418d95e4d7b57d
  - path: data/football/split-mask-q/test/intervention-test.json
    md5: 2fe124d70a610917c2f6ad6c26b6f9ff
  - path: models/bert-mask-q-baseline
    md5: ab6a3d3cbca3bc6e0c56da8b6e0d35e1.dir
  outs:
  - path: data/football/split-mask-q/test/predictions/baseline-test-bert-mask-q-baseline.json
    md5: 8a33f7f81d61410632a2545f2e881122
  - path: data/football/split-mask-q/test/predictions/control-test-bert-mask-q-baseline.json
    md5: a4aaf4058cefc9ccf3d5ca637f3537e0
  - path: data/football/split-mask-q/test/predictions/intervention-test-bert-mask-q-baseline.json
    md5: bcd09ddaacc23e212c5d798a813305b9
predict-bert-mask-p-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk predictions
    data/football/split-mask-p/test/baseline-test.json data/football/split-mask-p/test/intervention-test.json
    data/football/split-mask-p/test/control-test.json --model-path models/bert-mask-p-baseline
    --model-type bert --out-folder data/football/split-mask-p/test/predictions/ --max-answer-length
    10 --per-gpu-eval-batch-size 64
  deps:
  - path: data/football/split-mask-p/test/baseline-test.json
    md5: ed9e5c7fc588a0f4726e82c12edcf95f
  - path: data/football/split-mask-p/test/control-test.json
    md5: 24b3f1207449f5ad6a5403ad69bd5f6e
  - path: data/football/split-mask-p/test/intervention-test.json
    md5: 0546a3f31510080ed9795210a5799ff7
  - path: models/bert-mask-p-baseline
    md5: 416506bd1b6cd5414dfd6a494469e9c6.dir
  outs:
  - path: data/football/split-mask-p/test/predictions/baseline-test-bert-mask-p-baseline.json
    md5: 38d30b07469e2b4341fc42bc74679d9b
  - path: data/football/split-mask-p/test/predictions/control-test-bert-mask-p-baseline.json
    md5: 0df0efc58caf5525d47b9592c2f6c341
  - path: data/football/split-mask-p/test/predictions/intervention-test-bert-mask-p-baseline.json
    md5: c0ed0f855aebf5cf097a8c1f79c0a354
generate-test:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 38676 --num-workers
    8 --do-save --out-path data/football/split/test/ --multiplier 20 --split test
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split/test/baseline-test.json
    md5: dd4270113e8c4df1d87952704174b327
  - path: data/football/split/test/control-test.json
    md5: 21b540d35dc9a921efad2a96ef7fff72
  - path: data/football/split/test/intervention-test.json
    md5: 397e7a8e463ddf1d144193a8689c2875
evaluate-baselines:
  cmd: python main.py evaluate data/football/split/test/baseline-test.json data/football/split/test/intervention-test.json
    data/football/split/test/control-test.json --prediction-folder data/football/split/test/predictions/
    --output metrics/football/baselines/baselines.json --metric EMRelaxed
  deps:
  - path: data/football/split/test/baseline-test.json
    md5: dd4270113e8c4df1d87952704174b327
  - path: data/football/split/test/control-test.json
    md5: 21b540d35dc9a921efad2a96ef7fff72
  - path: data/football/split/test/intervention-test.json
    md5: 397e7a8e463ddf1d144193a8689c2875
  - path: data/football/split/test/predictions/
    md5: 072d2611626c3e01213ff6ba3d039788.dir
  outs:
  - path: metrics/football/baselines/baselines.json
    md5: b0c8bd67ea5f0f779bb1865dacc65d59
evaluate-baselines-mask-q:
  cmd: python main.py evaluate data/football/split-mask-q/test/baseline-test.json
    data/football/split-mask-q/test/intervention-test.json data/football/split-mask-q/test/control-test.json
    --prediction-folder data/football/split-mask-q/test/predictions/ --output metrics/football/baselines/baselines-mask-q.json
    --metric EMRelaxed
  deps:
  - path: data/football/split-mask-q/test/baseline-test.json
    md5: 63d660205ba99e2c9330e7d1e63e15b1
  - path: data/football/split-mask-q/test/control-test.json
    md5: 875aed3a9069ff649c418d95e4d7b57d
  - path: data/football/split-mask-q/test/intervention-test.json
    md5: 2fe124d70a610917c2f6ad6c26b6f9ff
  - path: data/football/split-mask-q/test/predictions/
    md5: 4ae9030dbe18f6cdd06a867436ae9782.dir
  outs:
  - path: metrics/football/baselines/baselines-mask-q.json
    md5: 15c9726d2e5851da82c6fa27817da8b1
evaluate-baselines-mask-p:
  cmd: python main.py evaluate data/football/split-mask-p/test/baseline-test.json
    data/football/split-mask-p/test/intervention-test.json data/football/split-mask-p/test/control-test.json
    --prediction-folder data/football/split-mask-p/test/predictions/ --output metrics/football/baselines/baselines-mask-p.json
    --metric EMRelaxed
  deps:
  - path: data/football/split-mask-p/test/baseline-test.json
    md5: ed9e5c7fc588a0f4726e82c12edcf95f
  - path: data/football/split-mask-p/test/control-test.json
    md5: 24b3f1207449f5ad6a5403ad69bd5f6e
  - path: data/football/split-mask-p/test/intervention-test.json
    md5: 0546a3f31510080ed9795210a5799ff7
  - path: data/football/split-mask-p/test/predictions/
    md5: a4c9eba45c0552fa7186ccb253c5a6d8.dir
  outs:
  - path: metrics/football/baselines/baselines-mask-p.json
    md5: 5f9c76465f7d8408229420b2b8b5b55b
generate-sam:
  cmd: python main.py generate-balanced --config conf/evaluate.json --seed 56 --num-workers
    8 --do-save --out-path data/football/full --multiplier 35
  deps:
  - path: conf/evaluate.json
    md5: 114d721cda0d768406fbcaff0446b3e7
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
predict-transformers-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk predictions
    data/football/full/baseline.json data/football/full/intervention.json data/football/full/control.json
    --model-path models/albert-base-v2-squad1 --model-type albert --model-path models/albert-large-v2-squad1
    --model-type albert --model-path models/albert-xlarge-v2-squad1 --model-type albert
    --model-path models/albert-xxlarge-v2-squad1 --model-type albert --model-path
    models/bert-base-uncased-squad1 --model-type bert --model-path models/bert-large-uncased-squad1
    --model-type bert --model-path models/roberta-base-squad1 --model-type roberta
    --model-path models/roberta-large-squad1 --model-type roberta --out-folder data/football/full/predictions/squad1
    --max-answer-length 10 --per-gpu-eval-batch-size 32
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/albert-base-v2-squad1
    md5: ace9c8af69f8e73d97deac6a76c1d2a1.dir
  - path: models/albert-large-v2-squad1
    md5: d125f85b6cd80c44f1b1b8034c39740c.dir
  - path: models/albert-xlarge-v2-squad1
    md5: c4db834be68c60375f5d72336b905502.dir
  - path: models/albert-xxlarge-v2-squad1
    md5: ab4909936dc0ca044d631f0bf6408068.dir
  - path: models/bert-base-uncased-squad1
    md5: 0bc609c29bbd02bef8fce079fa320f6a.dir
  - path: models/bert-large-uncased-squad1
    md5: 6ed53ddb2075786fffd3ea6530c8c506.dir
  - path: models/roberta-base-squad1
    md5: 223be1b1d0dba22ed9985bc1e200295e.dir
  - path: models/roberta-large-squad1
    md5: ec9a2c9e6e83cfc2dfa906623949fe06.dir
  outs:
  - path: data/football/full/predictions/squad1/baseline-albert-base-v2-squad1.json
    md5: e158ad4fb549375131335fcaa2d0eb18
  - path: data/football/full/predictions/squad1/baseline-albert-large-v2-squad1.json
    md5: 19d710a53c99b68c8891277426a4bac3
  - path: data/football/full/predictions/squad1/baseline-albert-xlarge-v2-squad1.json
    md5: 366e29bcc35a4ff84b51bf584b4be34b
  - path: data/football/full/predictions/squad1/baseline-albert-xxlarge-v2-squad1.json
    md5: c6b740379a9db8caf48da224eab47920
  - path: data/football/full/predictions/squad1/baseline-bert-base-uncased-squad1.json
    md5: 54e767a12d0a1c50c6486608a3cca5fe
  - path: data/football/full/predictions/squad1/baseline-bert-large-uncased-squad1.json
    md5: 6bf7f3c15ab8ae40bf4583c8ed4ecf28
  - path: data/football/full/predictions/squad1/baseline-roberta-base-squad1.json
    md5: b9803c701277a7dfecdd17bad48f574e
  - path: data/football/full/predictions/squad1/baseline-roberta-large-squad1.json
    md5: e883e398dbebd40462bf41fa67db5935
  - path: data/football/full/predictions/squad1/control-albert-base-v2-squad1.json
    md5: af0a7c43532de7fb920d4a1b87a8c39b
  - path: data/football/full/predictions/squad1/control-albert-large-v2-squad1.json
    md5: 28e310115caeaac9804aaa7fd4f104f6
  - path: data/football/full/predictions/squad1/control-albert-xlarge-v2-squad1.json
    md5: 477c6da293a9d519e13d912a83dff32b
  - path: data/football/full/predictions/squad1/control-albert-xxlarge-v2-squad1.json
    md5: c5c2a265663c2c87ece267d57e184616
  - path: data/football/full/predictions/squad1/control-bert-base-uncased-squad1.json
    md5: 0cca8244457bf6573d97b22ca77b885b
  - path: data/football/full/predictions/squad1/control-bert-large-uncased-squad1.json
    md5: 20a4fe315988f2a609dc802c5edabef3
  - path: data/football/full/predictions/squad1/control-roberta-base-squad1.json
    md5: a0a40d84976ce6c6ad8bf99d3d4a5ac4
  - path: data/football/full/predictions/squad1/control-roberta-large-squad1.json
    md5: 1f93d9d6b8242d3cea5fe7f91f34d9b8
  - path: data/football/full/predictions/squad1/intervention-albert-base-v2-squad1.json
    md5: 343f4622912bd3d798392dca0a56feed
  - path: data/football/full/predictions/squad1/intervention-albert-large-v2-squad1.json
    md5: a1819890f9f9755212b81ecd29abce38
  - path: data/football/full/predictions/squad1/intervention-albert-xlarge-v2-squad1.json
    md5: aba453b34fbc334a729dd68b78bc1979
  - path: data/football/full/predictions/squad1/intervention-albert-xxlarge-v2-squad1.json
    md5: 9eb3dff6e5259e6ae48b1d0f4cabac13
  - path: data/football/full/predictions/squad1/intervention-bert-base-uncased-squad1.json
    md5: 68374c3364c34bc5b0ad4800b755f32b
  - path: data/football/full/predictions/squad1/intervention-bert-large-uncased-squad1.json
    md5: 43bb40626d7ca76ecadd1ce9cfb8804d
  - path: data/football/full/predictions/squad1/intervention-roberta-base-squad1.json
    md5: da5155f0bae478c4c9ea8b4edb9be69a
  - path: data/football/full/predictions/squad1/intervention-roberta-large-squad1.json
    md5: 99990190e03f5516f336850256f4ee17
evaluate-intervention-squad1:
  cmd: python main.py evaluate-intervention --baseline-file data/football/full/baseline.json
    --predictions-folder data/football/full/predictions/squad1 --control --output
    metrics/football/squad1/eoi.json --split-reasoning --split-num-modifier --split-sam
    --do-save
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: data/football/full/predictions/squad1
    md5: 67a27ceb012f1159c34dbc487d25b5d4.dir
  - path: scripts/evaluate_intervention.py
    md5: 1286bebe5e85f7d524dc738d83c31de1
  outs:
  - path: metrics/football/squad1/eoi.json
    md5: fee60c0fbdc6b54836024e60d2028322
train-bert-base-uncased-on-hotpotqa:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/hotpotqa/train.json
    --model-path bert-base-uncased --model-type bert --eval-file data/datasets/hotpotqa/dev.json
    --save-model-folder models/bert-base-uncased-hotpotqa --do-eval-after-training
    --num-workers 32 --per-gpu-train-batch-size 32 --max-answer-length 30 --gradient-accumulation-steps
    8 --fp16 --debug-features --save-steps 0
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/bert-base-uncased-hotpotqa
    md5: e200ee62d23a26dfd5200fe4045d44fc.dir
train-bert-large-uncased-on-hotpotqa:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/hotpotqa/train.json
    --model-path bert-large-uncased --model-type bert --eval-file data/datasets/hotpotqa/dev.json
    --save-model-folder models/bert-large-uncased-hotpotqa --do-eval-after-training
    --num-workers 32 --per-gpu-train-batch-size 4 --max-answer-length 30 --gradient-accumulation-steps
    64 --fp16 --debug-features --save-steps 0 --num-train-epochs 2
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/bert-large-uncased-hotpotqa
    md5: 60a68459537a8b5e2d8e2b3c1dd623d6.dir
train-roberta-base-on-hotpotqa:
  cmd: MODEL=roberta-base CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/hotpotqa/
    SAVE_TO=models/roberta-base-hotpotqa BATCH_SIZE=32 ACC_STEPS=8 MODEL_TYPE=roberta
    bash scripts/cache_and_train_hotpotqa.sh
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/roberta-base-hotpotqa
    md5: 101b79aac16eaa652452f3550b08d70d.dir
train-roberta-large-on-hotpotqa:
  cmd: MODEL=roberta-large CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/hotpotqa/
    SAVE_TO=models/roberta-large-hotpotqa BATCH_SIZE=6 ACC_STEPS=43 MODEL_TYPE=roberta
    bash scripts/cache_and_train_hotpotqa.sh
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/roberta-large-hotpotqa
    md5: 68dbefcbb69ac7e74159c2ea41fa813e.dir
train-albert-base-v2-on-hotpotqa:
  cmd: MODEL=albert-base-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/hotpotqa/
    SAVE_TO=models/albert-base-v2-hotpotqa BATCH_SIZE=24 ACC_STEPS=11 MODEL_TYPE=albert
    bash scripts/cache_and_train_hotpotqa.sh
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/albert-base-v2-hotpotqa
    md5: 2ae1ea2cdaf75439b389eb27f22018c3.dir
train-albert-large-v2-on-hotpotqa:
  cmd: MODEL=albert-large-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/hotpotqa/
    SAVE_TO=models/albert-large-v2-hotpotqa BATCH_SIZE=8 ACC_STEPS=32 MODEL_TYPE=albert
    bash scripts/cache_and_train_hotpotqa.sh
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/albert-large-v2-hotpotqa
    md5: 4392311d0a463c69363bd9fc4a827d42.dir
train-albert-xlarge-v2-on-hotpotqa:
  cmd: MODEL=albert-xlarge-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/hotpotqa/
    SAVE_TO=models/albert-xlarge-v2-hotpotqa BATCH_SIZE=4 ACC_STEPS=64 MODEL_TYPE=albert
    bash scripts/cache_and_train_hotpotqa.sh
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/albert-xlarge-v2-hotpotqa
    md5: b7288bd0db98c1e5b48205bdb40f0765.dir
train-albert-xxlarge-v2-on-hotpotqa:
  cmd: MODEL=albert-xxlarge-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/hotpotqa/
    SAVE_TO=models/albert-xxlarge-v2-hotpotqa BATCH_SIZE=2 ACC_STEPS=128 MODEL_TYPE=albert
    bash scripts/cache_and_train_hotpotqa.sh
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/albert-xxlarge-v2-hotpotqa
    md5: ce2cdfd7fb87ef93ea9d737adf3b3668.dir
train-bert-base-uncased-on-wikihop:
  cmd: MODEL=bert-base-uncased CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/wikihop/
    SAVE_TO=models/bert-base-uncased-wikihop BATCH_SIZE=32 ACC_STEPS=8 MODEL_TYPE=bert
    bash scripts/cache_and_train_wikihop.sh
  deps:
  - path: data/datasets/wikihop/dev.json
    md5: e56f5a06c026098b1ef5e90038208cc5
  - path: data/datasets/wikihop/train.json
    md5: bc510716cc7e83ffb5e161210fc2b20e
  outs:
  - path: models/bert-base-uncased-wikihop
    md5: 2b773338b69ef3eefb6af84a9491d68d.dir
train-bert-base-uncased-on-searchqa:
  cmd: MODEL=bert-base-uncased CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/searchqa/
    SAVE_TO=models/bert-base-uncased-searchqa BATCH_SIZE=32 ACC_STEPS=8 MODEL_TYPE=bert
    bash scripts/cache_and_train_searchqa.sh
  deps:
  - path: data/datasets/searchqa/dev.json
    md5: 185bb12a2f719e2bb3b9e689292cbeb1
  - path: data/datasets/searchqa/train.json
    md5: b1274b21922e7fe86c5edf07e3a6b8ee
  outs:
  - path: models/bert-base-uncased-searchqa
    md5: 9cbf89bbd9c5ca6fbaf1dad91ea6a36d.dir
train-bert-large-uncased-on-searchqa:
  cmd: MODEL=bert-large-uncased CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/searchqa/
    SAVE_TO=models/bert-large-uncased-searchqa BATCH_SIZE=4 ACC_STEPS=64 MODEL_TYPE=bert
    bash scripts/cache_and_train_searchqa.sh
  deps:
  - path: data/datasets/searchqa/dev.json
    md5: 185bb12a2f719e2bb3b9e689292cbeb1
  - path: data/datasets/searchqa/train.json
    md5: b1274b21922e7fe86c5edf07e3a6b8ee
  outs:
  - path: models/bert-large-uncased-searchqa
    md5: 28177cd94a8470c8441bfb2faed5820d.dir
train-bert-base-uncased-on-drop:
  cmd: MODEL=bert-base-uncased CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/drop/
    SAVE_TO=models/bert-base-uncased-drop BATCH_SIZE=32 ACC_STEPS=8 MODEL_TYPE=bert
    bash scripts/cache_and_train_drop.sh
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/bert-base-uncased-drop
    md5: b37f239ee319283b0f32b5e4a6485898.dir
train-bert-large-uncased-on-drop:
  cmd: MODEL=bert-large-uncased CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/drop/
    SAVE_TO=models/bert-large-uncased-drop BATCH_SIZE=4 ACC_STEPS=32 MODEL_TYPE=bert
    bash scripts/cache_and_train_drop.sh
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/bert-large-uncased-drop
    md5: 8d81af4892de9bddfc161f5cfb9fb7bc.dir
train-roberta-base-on-drop:
  cmd: MODEL=roberta-base CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/drop/
    SAVE_TO=models/roberta-base-drop BATCH_SIZE=32 ACC_STEPS=8 MODEL_TYPE=roberta
    bash scripts/cache_and_train_drop.sh
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/roberta-base-drop
    md5: 270d20c3dc4c1a0903035a279409ef4f.dir
train-roberta-large-on-drop:
  cmd: MODEL=roberta-large CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/drop/
    SAVE_TO=models/roberta-large-drop BATCH_SIZE=6 ACC_STEPS=43 MODEL_TYPE=roberta
    bash scripts/cache_and_train_drop.sh
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/roberta-large-drop
    md5: 359b46e4b553a65cd22becac7d5e80b4.dir
train-albert-base-v2-on-drop:
  cmd: MODEL=albert-base-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/drop/
    SAVE_TO=models/albert-base-v2-drop BATCH_SIZE=24 ACC_STEPS=11 MODEL_TYPE=albert
    bash scripts/cache_and_train_drop.sh
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/albert-base-v2-drop
    md5: 28c9fd6dcb807fdcb1a88f3c451da775.dir
train-albert-large-v2-on-drop:
  cmd: MODEL=albert-large-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/drop/
    SAVE_TO=models/albert-large-v2-drop BATCH_SIZE=8 ACC_STEPS=32 MODEL_TYPE=albert
    bash scripts/cache_and_train_drop.sh
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/albert-large-v2-drop
    md5: 527955ad5d75625afe3af6c1ec79a33a.dir
train-albert-xlarge-v2-on-drop:
  cmd: MODEL=albert-xlarge-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/drop/
    SAVE_TO=models/albert-xlarge-v2-drop BATCH_SIZE=4 ACC_STEPS=64 MODEL_TYPE=albert
    bash scripts/cache_and_train_drop.sh
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/albert-xlarge-v2-drop
    md5: 2ec356a9c4d4ba6e616352d7333b94b9.dir
train-albert-xxlarge-v2-on-drop:
  cmd: MODEL=albert-xxlarge-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/drop/
    SAVE_TO=models/albert-xxlarge-v2-drop BATCH_SIZE=2 ACC_STEPS=128 MODEL_TYPE=albert
    bash scripts/cache_and_train_drop.sh
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/albert-xxlarge-v2-drop
    md5: 9980cee95f2ffdf9643b57d1c79ac1cd.dir
train-bert-base-uncased-on-newsqa:
  cmd: MODEL=bert-base-uncased CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/newsqa/
    SAVE_TO=models/bert-base-uncased-newsqa BATCH_SIZE=32 ACC_STEPS=8 MODEL_TYPE=bert-base-uncased
    bash scripts/cache_and_train_newsqa.sh
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/bert-base-uncased-newsqa
    md5: 687f96d67cb7cd1002352ac5e5c9adfa.dir
train-bert-large-uncased-on-newsqa:
  cmd: MODEL=bert-large-uncased CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/newsqa/
    SAVE_TO=models/bert-large-uncased-newsqa BATCH_SIZE=4 ACC_STEPS=32 MODEL_TYPE=bert
    bash scripts/cache_and_train_newsqa.sh
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/bert-large-uncased-newsqa
    md5: 4cad1c3a171155520f87b54d943b0415.dir
train-roberta-base-on-newsqa:
  cmd: MODEL=roberta-base CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/newsqa/
    SAVE_TO=models/roberta-base-newsqa BATCH_SIZE=32 ACC_STEPS=8 MODEL_TYPE=roberta
    bash scripts/cache_and_train_newsqa.sh
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/roberta-base-newsqa
    md5: 56b309d79b2d11a409ca179805cf2e94.dir
train-roberta-large-on-newsqa:
  cmd: MODEL=roberta-large CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/newsqa/
    SAVE_TO=models/roberta-large-newsqa BATCH_SIZE=6 ACC_STEPS=43 MODEL_TYPE=roberta
    bash scripts/cache_and_train_newsqa.sh
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/roberta-large-newsqa
    md5: c22c8420db80eb2dc216b342558b881d.dir
train-albert-base-v2-on-newsqa:
  cmd: MODEL=albert-base-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/newsqa/
    SAVE_TO=models/albert-base-v2-newsqa BATCH_SIZE=24 ACC_STEPS=11 MODEL_TYPE=albert
    bash scripts/cache_and_train_newsqa.sh
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/albert-base-v2-newsqa
    md5: 7f96f4fe041e25155bc9f2dee538fc31.dir
train-albert-large-v2-on-newsqa:
  cmd: MODEL=albert-large-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/newsqa/
    SAVE_TO=models/albert-large-v2-newsqa BATCH_SIZE=8 ACC_STEPS=32 MODEL_TYPE=albert
    bash scripts/cache_and_train_newsqa.sh
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/albert-large-v2-newsqa
    md5: 8b4d7cc393df2fa2366cec68e1cdf869.dir
train-albert-xlarge-v2-on-newsqa:
  cmd: MODEL=albert-xlarge-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/newsqa/
    SAVE_TO=models/albert-xlarge-v2-newsqa BATCH_SIZE=4 ACC_STEPS=64 MODEL_TYPE=albert
    bash scripts/cache_and_train_newsqa.sh
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/albert-xlarge-v2-newsqa
    md5: afaa11bf6c549eda29b8c7dfc1541f8e.dir
predict-transformers-hotpotqa:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk predictions
    data/football/full/baseline.json data/football/full/intervention.json data/football/full/control.json
    --model-path models/albert-base-v2-hotpotqa --model-type albert --model-path models/albert-large-v2-hotpotqa
    --model-type albert --model-path models/albert-xlarge-v2-hotpotqa --model-type
    albert --model-path models/albert-xxlarge-v2-hotpotqa --model-type albert --model-path
    models/bert-base-uncased-hotpotqa --model-type bert --model-path models/bert-large-uncased-hotpotqa
    --model-type bert --model-path models/roberta-base-hotpotqa --model-type roberta
    --model-path models/roberta-large-hotpotqa --model-type roberta --out-folder data/football/full/predictions/hotpotqa
    --max-answer-length 10
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/albert-base-v2-hotpotqa
    md5: 2ae1ea2cdaf75439b389eb27f22018c3.dir
  - path: models/albert-large-v2-hotpotqa
    md5: 4392311d0a463c69363bd9fc4a827d42.dir
  - path: models/albert-xlarge-v2-hotpotqa
    md5: b7288bd0db98c1e5b48205bdb40f0765.dir
  - path: models/albert-xxlarge-v2-hotpotqa
    md5: ce2cdfd7fb87ef93ea9d737adf3b3668.dir
  - path: models/bert-base-uncased-hotpotqa
    md5: e200ee62d23a26dfd5200fe4045d44fc.dir
  - path: models/bert-large-uncased-hotpotqa
    md5: 60a68459537a8b5e2d8e2b3c1dd623d6.dir
  - path: models/roberta-base-hotpotqa
    md5: 101b79aac16eaa652452f3550b08d70d.dir
  - path: models/roberta-large-hotpotqa
    md5: 68dbefcbb69ac7e74159c2ea41fa813e.dir
  outs:
  - path: data/football/full/predictions/hotpotqa/baseline-albert-base-v2-hotpotqa.json
    md5: 3d43129a80dd0bbce841e30e10ae10b4
  - path: data/football/full/predictions/hotpotqa/baseline-albert-large-v2-hotpotqa.json
    md5: 2f3f6683c312bc4ad2b09c283ad03771
  - path: data/football/full/predictions/hotpotqa/baseline-albert-xlarge-v2-hotpotqa.json
    md5: 8487611cd199c67a1ce9e044f383a780
  - path: data/football/full/predictions/hotpotqa/baseline-albert-xxlarge-v2-hotpotqa.json
    md5: ba2d39c3e1425020710ed076ee9c2176
  - path: data/football/full/predictions/hotpotqa/baseline-bert-base-uncased-hotpotqa.json
    md5: 4886cdc62251865e3ba96c45ae1f885b
  - path: data/football/full/predictions/hotpotqa/baseline-bert-large-uncased-hotpotqa.json
    md5: d2efcec25932001bb8b496a50af22dc8
  - path: data/football/full/predictions/hotpotqa/baseline-roberta-base-hotpotqa.json
    md5: 9e97e3a3d34f13eff9aeb2c038dc9f9c
  - path: data/football/full/predictions/hotpotqa/baseline-roberta-large-hotpotqa.json
    md5: 644110ec0a68f02271ef21a7a8b43685
  - path: data/football/full/predictions/hotpotqa/control-albert-base-v2-hotpotqa.json
    md5: f72f01378f9b98961eb57eabccf45294
  - path: data/football/full/predictions/hotpotqa/control-albert-large-v2-hotpotqa.json
    md5: c876903408e616357fc8959b163b868e
  - path: data/football/full/predictions/hotpotqa/control-albert-xlarge-v2-hotpotqa.json
    md5: da4b68905533bb7bea75a513cda79a02
  - path: data/football/full/predictions/hotpotqa/control-albert-xxlarge-v2-hotpotqa.json
    md5: e388d624c6df9c0d2fdd595a83073049
  - path: data/football/full/predictions/hotpotqa/control-bert-base-uncased-hotpotqa.json
    md5: 2585e8896a577318768039f1f719bb84
  - path: data/football/full/predictions/hotpotqa/control-bert-large-uncased-hotpotqa.json
    md5: ea28b3368efbfc0b6a5e60b761cd364a
  - path: data/football/full/predictions/hotpotqa/control-roberta-base-hotpotqa.json
    md5: 33e22c7233053105803ea043d423070e
  - path: data/football/full/predictions/hotpotqa/control-roberta-large-hotpotqa.json
    md5: 39077ca8b02868289c389f25db0c3ab3
  - path: data/football/full/predictions/hotpotqa/intervention-albert-base-v2-hotpotqa.json
    md5: 778ce56bb7152ca701803d9a1c518d89
  - path: data/football/full/predictions/hotpotqa/intervention-albert-large-v2-hotpotqa.json
    md5: 02662de1598c6f92285cdc9c9a87a97e
  - path: data/football/full/predictions/hotpotqa/intervention-albert-xlarge-v2-hotpotqa.json
    md5: ba7a8a08863fd17bfb237e90b56a7a4b
  - path: data/football/full/predictions/hotpotqa/intervention-albert-xxlarge-v2-hotpotqa.json
    md5: 594552a61f5cdce8d331d2bd74c6b90b
  - path: data/football/full/predictions/hotpotqa/intervention-bert-base-uncased-hotpotqa.json
    md5: e6675176c8f0b7dac847c1b15c2671bb
  - path: data/football/full/predictions/hotpotqa/intervention-bert-large-uncased-hotpotqa.json
    md5: c6c80af77ba4f5f85a63237f86ab7f56
  - path: data/football/full/predictions/hotpotqa/intervention-roberta-base-hotpotqa.json
    md5: 21696657dd0e59be91d4453360734a19
  - path: data/football/full/predictions/hotpotqa/intervention-roberta-large-hotpotqa.json
    md5: c11584ee9012e605b9ebc412892812a0
predict-transformers-drop:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk predictions
    data/football/full/baseline.json data/football/full/intervention.json data/football/full/control.json
    --model-path models/albert-base-v2-drop --model-type albert --model-path models/albert-large-v2-drop
    --model-type albert --model-path models/albert-xlarge-v2-drop --model-type albert
    --model-path models/albert-xxlarge-v2-drop --model-type albert --model-path models/bert-base-uncased-drop
    --model-type bert --model-path models/bert-large-uncased-drop --model-type bert
    --model-path models/roberta-base-drop --model-type roberta --model-path models/roberta-large-drop
    --model-type roberta --out-folder data/football/full/predictions/drop --max-answer-length
    10 --num-workers 8
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/albert-base-v2-drop
    md5: 28c9fd6dcb807fdcb1a88f3c451da775.dir
  - path: models/albert-large-v2-drop
    md5: 527955ad5d75625afe3af6c1ec79a33a.dir
  - path: models/albert-xlarge-v2-drop
    md5: 2ec356a9c4d4ba6e616352d7333b94b9.dir
  - path: models/albert-xxlarge-v2-drop
    md5: 9980cee95f2ffdf9643b57d1c79ac1cd.dir
  - path: models/bert-base-uncased-drop
    md5: b37f239ee319283b0f32b5e4a6485898.dir
  - path: models/bert-large-uncased-drop
    md5: 8d81af4892de9bddfc161f5cfb9fb7bc.dir
  - path: models/roberta-base-drop
    md5: 270d20c3dc4c1a0903035a279409ef4f.dir
  - path: models/roberta-large-drop
    md5: 359b46e4b553a65cd22becac7d5e80b4.dir
  outs:
  - path: data/football/full/predictions/drop/baseline-albert-base-v2-drop.json
    md5: 1c5280f7d3b82c0cac16e72d26ddb271
  - path: data/football/full/predictions/drop/baseline-albert-large-v2-drop.json
    md5: 7647e6396677720cc67eb1d0320d2450
  - path: data/football/full/predictions/drop/baseline-albert-xlarge-v2-drop.json
    md5: 1dc49a6f0f005c1cbc4f3824ca6fbe1a
  - path: data/football/full/predictions/drop/baseline-albert-xxlarge-v2-drop.json
    md5: a4cdb767fc7757065ac7f9fbea8d52a5
  - path: data/football/full/predictions/drop/baseline-bert-base-uncased-drop.json
    md5: 37ac625cf74c557a54f02361247e906c
  - path: data/football/full/predictions/drop/baseline-bert-large-uncased-drop.json
    md5: d6c6e60dc1c2a5f687fa26c4a7e25d4b
  - path: data/football/full/predictions/drop/baseline-roberta-base-drop.json
    md5: f6783b08f2c22cd569970aa27896c513
  - path: data/football/full/predictions/drop/baseline-roberta-large-drop.json
    md5: 475df8852c7a7f6a4deb03f0d728b932
  - path: data/football/full/predictions/drop/control-albert-base-v2-drop.json
    md5: 72ff57759b0d7f7ced306280c5a6d90c
  - path: data/football/full/predictions/drop/control-albert-large-v2-drop.json
    md5: 9ca002cbebbc34ef3fc019a65059327e
  - path: data/football/full/predictions/drop/control-albert-xlarge-v2-drop.json
    md5: 7421223e03b8b6df588baba487b22531
  - path: data/football/full/predictions/drop/control-albert-xxlarge-v2-drop.json
    md5: 8d082e7e5a6c6acfce2a36c021bba712
  - path: data/football/full/predictions/drop/control-bert-base-uncased-drop.json
    md5: 8c471513a1312694129cae316c5c4c25
  - path: data/football/full/predictions/drop/control-bert-large-uncased-drop.json
    md5: ac5c0fa4175eb2e189c33e3e7847f849
  - path: data/football/full/predictions/drop/control-roberta-base-drop.json
    md5: 5db6c518729063a79da1379cdfce862b
  - path: data/football/full/predictions/drop/control-roberta-large-drop.json
    md5: 40e384acd9c856e6e6b3643cf4a2b369
  - path: data/football/full/predictions/drop/intervention-albert-base-v2-drop.json
    md5: ecbbca349a7e28e2d6fe69f800aec9a3
  - path: data/football/full/predictions/drop/intervention-albert-large-v2-drop.json
    md5: d9e4d73023c751cbb33b5b85dcac2d54
  - path: data/football/full/predictions/drop/intervention-albert-xlarge-v2-drop.json
    md5: 8b3574a7ddfacd51c287b8032609dc22
  - path: data/football/full/predictions/drop/intervention-albert-xxlarge-v2-drop.json
    md5: 2f60a22314c600ad1191175c2b413378
  - path: data/football/full/predictions/drop/intervention-bert-base-uncased-drop.json
    md5: 5a9a65a6b8ac2787ffab8cafbf1bd26a
  - path: data/football/full/predictions/drop/intervention-bert-large-uncased-drop.json
    md5: 740c77ade1d75c38f16f98a91022c4c6
  - path: data/football/full/predictions/drop/intervention-roberta-base-drop.json
    md5: fd390207d5b1dee950dfbc30fc5bd052
  - path: data/football/full/predictions/drop/intervention-roberta-large-drop.json
    md5: 6b72eb9805144367774f3e3e22c3519f
predict-transformers-newsqa:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk predictions
    data/football/full/baseline.json data/football/full/intervention.json data/football/full/control.json
    --model-path models/albert-base-v2-newsqa --model-type albert --model-path models/albert-large-v2-newsqa
    --model-type albert --model-path models/albert-xlarge-v2-newsqa --model-type albert
    --model-path models/albert-xxlarge-v2-newsqa --model-type albert --model-path
    models/bert-base-uncased-newsqa --model-type bert --model-path models/bert-large-uncased-newsqa
    --model-type bert --model-path models/roberta-base-newsqa --model-type roberta
    --model-path models/roberta-large-newsqa --model-type roberta --out-folder data/football/full/predictions/newsqa
    --max-answer-length 10 --num-workers 8
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/albert-base-v2-newsqa
    md5: 7f96f4fe041e25155bc9f2dee538fc31.dir
  - path: models/albert-large-v2-newsqa
    md5: 8b4d7cc393df2fa2366cec68e1cdf869.dir
  - path: models/albert-xlarge-v2-newsqa
    md5: afaa11bf6c549eda29b8c7dfc1541f8e.dir
  - path: models/albert-xxlarge-v2-newsqa
    md5: e13862cd95b24d49bcef2a2b18bdeffc.dir
  - path: models/bert-base-uncased-newsqa
    md5: 687f96d67cb7cd1002352ac5e5c9adfa.dir
  - path: models/bert-large-uncased-newsqa
    md5: 4cad1c3a171155520f87b54d943b0415.dir
  - path: models/roberta-base-newsqa
    md5: 56b309d79b2d11a409ca179805cf2e94.dir
  - path: models/roberta-large-newsqa
    md5: c22c8420db80eb2dc216b342558b881d.dir
  outs:
  - path: data/football/full/predictions/newsqa/baseline-albert-base-v2-newsqa.json
    md5: 3561a04a96c65ece82a5a90085afeb01
  - path: data/football/full/predictions/newsqa/baseline-albert-large-v2-newsqa.json
    md5: 63905936c1ace9d0a99bfb4b8857ee41
  - path: data/football/full/predictions/newsqa/baseline-albert-xlarge-v2-newsqa.json
    md5: 89f3f59c32eee1a85a405d1ab76027b5
  - path: data/football/full/predictions/newsqa/baseline-albert-xxlarge-v2-newsqa.json
    md5: 6eed3029a2a06412bfa06fc667d6b087
  - path: data/football/full/predictions/newsqa/baseline-bert-base-uncased-newsqa.json
    md5: 92b48977f9947377a3d21a4754186813
  - path: data/football/full/predictions/newsqa/baseline-bert-large-uncased-newsqa.json
    md5: 410d7b3106195096efacfa6d49e33432
  - path: data/football/full/predictions/newsqa/baseline-roberta-base-newsqa.json
    md5: 561f9fed778dd388634480e4bc663ccb
  - path: data/football/full/predictions/newsqa/baseline-roberta-large-newsqa.json
    md5: 0dc263bb3c8616c7b4ad5ce38a63cc47
  - path: data/football/full/predictions/newsqa/control-albert-base-v2-newsqa.json
    md5: ab247972d769f72477f907dd8bb3fe59
  - path: data/football/full/predictions/newsqa/control-albert-large-v2-newsqa.json
    md5: 16e771450783ec686885b021e05b2e78
  - path: data/football/full/predictions/newsqa/control-albert-xlarge-v2-newsqa.json
    md5: a831986fd59629be5953ecd9cefcefc7
  - path: data/football/full/predictions/newsqa/control-albert-xxlarge-v2-newsqa.json
    md5: d55a3b647fce7a2a30b24b2b9c4d1135
  - path: data/football/full/predictions/newsqa/control-bert-base-uncased-newsqa.json
    md5: bc9338319b9391820f5b73ec98b3cd74
  - path: data/football/full/predictions/newsqa/control-bert-large-uncased-newsqa.json
    md5: d11c25480fbe9df7a87ba1cfc8cd97a0
  - path: data/football/full/predictions/newsqa/control-roberta-base-newsqa.json
    md5: 945aa822625408654b23989184967996
  - path: data/football/full/predictions/newsqa/control-roberta-large-newsqa.json
    md5: 71a5cbc30ef07ce900502120826bb64f
  - path: data/football/full/predictions/newsqa/intervention-albert-base-v2-newsqa.json
    md5: 546c6804010ddad03551fde88390b764
  - path: data/football/full/predictions/newsqa/intervention-albert-large-v2-newsqa.json
    md5: c56f509488b0aab12623f77afa689cf0
  - path: data/football/full/predictions/newsqa/intervention-albert-xlarge-v2-newsqa.json
    md5: 284681f91d4c6d70efc853b0a85bd212
  - path: data/football/full/predictions/newsqa/intervention-albert-xxlarge-v2-newsqa.json
    md5: bf92c586854f85b28d6e55979a0c3a62
  - path: data/football/full/predictions/newsqa/intervention-bert-base-uncased-newsqa.json
    md5: 855524d1b1c2152881bf72ad53df9eba
  - path: data/football/full/predictions/newsqa/intervention-bert-large-uncased-newsqa.json
    md5: f59a9ba635d535589bcaac8e61c573fc
  - path: data/football/full/predictions/newsqa/intervention-roberta-base-newsqa.json
    md5: a56507c87ba4bf35d21b91058c7706b4
  - path: data/football/full/predictions/newsqa/intervention-roberta-large-newsqa.json
    md5: 86243078cd2d0b0a604a3fb574a2a6d2
evaluate-intervention-hotpotqa:
  cmd: python main.py evaluate-intervention --baseline-file data/football/full/baseline.json
    --predictions-folder data/football/full/predictions/hotpotqa --control --output
    metrics/football/hotpotqa/eoi.json --split-reasoning --split-num-modifier --split-sam
    --do-save
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: data/football/full/predictions/hotpotqa
    md5: 0c82d0a238a9a8abb5a1b312ea54cd96.dir
  - path: scripts/evaluate_intervention.py
    md5: 1286bebe5e85f7d524dc738d83c31de1
  outs:
  - path: metrics/football/hotpotqa/eoi.json
    md5: 21e7c81536220e7095d8bf453b4361b6
evaluate-intervention-drop:
  cmd: python main.py evaluate-intervention --baseline-file data/football/full/baseline.json
    --predictions-folder data/football/full/predictions/drop --control --output metrics/football/drop/eoi.json
    --split-reasoning --split-num-modifier --split-sam --do-save
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: data/football/full/predictions/drop
    md5: b2ac70062019d82278d2a7723507ab5b.dir
  - path: scripts/evaluate_intervention.py
    md5: 1286bebe5e85f7d524dc738d83c31de1
  outs:
  - path: metrics/football/drop/eoi.json
    md5: 3af1794bf59e4f4da6b7ecde0046051e
evaluate-intervention-newsqa:
  cmd: python main.py evaluate-intervention --baseline-file data/football/full/baseline.json
    --predictions-folder data/football/full/predictions/newsqa --control --output
    metrics/football/newsqa/eoi.json --split-reasoning --split-num-modifier --split-sam
    --do-save
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: data/football/full/predictions/newsqa
    md5: 89b3fef1167ca478fcc1bcd6966dfcf8.dir
  - path: scripts/evaluate_intervention.py
    md5: 1286bebe5e85f7d524dc738d83c31de1
  outs:
  - path: metrics/football/newsqa/eoi.json
    md5: 94cb98787d48fa9197fd39bef9a708ac
train-albert-xxlarge-v2-on-newsqa:
  cmd: MODEL=albert-xxlarge-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/newsqa/
    SAVE_TO=models/albert-xxlarge-v2-newsqa BATCH_SIZE=2 ACC_STEPS=128 MODEL_TYPE=albert
    bash scripts/cache_and_train_newsqa.sh
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/albert-xxlarge-v2-newsqa
    md5: e13862cd95b24d49bcef2a2b18bdeffc.dir
train-bidaf-on-drop:
  cmd: TRAIN_SET=data/datasets/drop/train.json EVAL_SET=data/datasets/drop/dev.json
    CUDA=0 MULT=2 allennlp train conf/bidaf.jsonnet -s models/bidaf-drop
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/bidaf-drop
    md5: 44b15ce647757f90ce2ac1c2336243e5.dir
train-bidaf-on-squad1:
  cmd: TRAIN_SET=data/datasets/squad1/train-v1.1.json EVAL_SET=data/datasets/squad1/dev-v1.1.json
    CUDA=0 MULT=1 allennlp train conf/bidaf.jsonnet -s models/bidaf-squad1
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/bidaf-squad1
    md5: 6920de5c12d07ca5f2eb28767297541c.dir
train-bidaf-on-hotpotqa:
  cmd: TRAIN_SET=data/datasets/hotpotqa/train.json EVAL_SET=data/datasets/hotpotqa/dev.json
    CUDA=0 MULT=1 allennlp train conf/bidaf-hqa.jsonnet -s models/bidaf-hotpotqa
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/bidaf-hotpotqa
    md5: 34b7e974dd7a32695d1f09a7cd0b0301.dir
fix-newsqa-for-bidaf:
  cmd: python main.py fix-newsqa-for-bidaf
  deps:
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: data/datasets/newsqa/train-fixed.json
    md5: 9d6d533182926ef1ae0ba3673da24adb
train-bidaf-elmo-on-squad1:
  cmd: TRAIN_SET=data/datasets/squad1/train-v1.1.json EVAL_SET=data/datasets/squad1/dev-v1.1.json
    CUDA=0 MULT=1 allennlp train conf/bidaf-elmo.jsonnet -s models/bidaf-elmo-squad1
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/bidaf-elmo-squad1
    md5: 7368b44138a6c53afe1fd0320cfac4cd.dir
train-bidaf-elmo-on-drop:
  cmd: TRAIN_SET=data/datasets/drop/train.json EVAL_SET=data/datasets/drop/dev.json
    CUDA=0 MULT=2 allennlp train conf/bidaf-elmo-drop.jsonnet -s models/bidaf-elmo-drop
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/bidaf-elmo-drop
    md5: 23736254c3a10cabe7c0fe6297c6c7ac.dir
train-bidaf-on-newsqa:
  cmd: TRAIN_SET=data/datasets/newsqa/train-fixed.json EVAL_SET=data/datasets/newsqa/dev.json
    CUDA=0 MULT=1 allennlp train conf/bidaf.jsonnet -s models/bidaf-newsqa
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train-fixed.json
    md5: 9d6d533182926ef1ae0ba3673da24adb
  outs:
  - path: models/bidaf-newsqa
    md5: f40357470006f61036d8b49aee9a45f3.dir
train-bidaf-elmo-on-newsqa:
  cmd: TRAIN_SET=data/datasets/newsqa/train-fixed.json EVAL_SET=data/datasets/newsqa/dev.json
    CUDA=0 MULT=1 allennlp train conf/bidaf-elmo-newsqa.jsonnet -s models/bidaf-elmo-newsqa
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train-fixed.json
    md5: 9d6d533182926ef1ae0ba3673da24adb
  outs:
  - path: models/bidaf-elmo-newsqa
    md5: e575e436f1fc77c56a0468a5c1e6a1b7.dir
predict-bidaf-on-squad1:
  cmd: mkdir -p data/football/full/predictions/squad1 &&allennlp predict models/bidaf-squad1/model.tar.gz
    data/football/full/baseline.json --output-file data/football/full/predictions/squad1/baseline-bidaf-squad1.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/baseline.json data/football/full/predictions/squad1/baseline-bidaf-squad1.json
    && allennlp predict models/bidaf-squad1/model.tar.gz data/football/full/intervention.json
    --output-file data/football/full/predictions/squad1/intervention-bidaf-squad1.json
    --cuda-device 0 --use-dataset-reader --silent &&python main.py convert-allennlp
    data/football/full/intervention.json data/football/full/predictions/squad1/intervention-bidaf-squad1.json
    &&allennlp predict models/bidaf-squad1/model.tar.gz data/football/full/control.json
    --output-file data/football/full/predictions/squad1/control-bidaf-squad1.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/control.json data/football/full/predictions/squad1/control-bidaf-squad1.json
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/bidaf-squad1/model.tar.gz
    md5: c8111d030a15552537fb4c22efd9c886
  outs:
  - path: data/football/full/predictions/squad1/baseline-bidaf-squad1.json
    md5: b32f2e0d08bd534f917b02adab2bed45
  - path: data/football/full/predictions/squad1/control-bidaf-squad1.json
    md5: 532290d8e1f2575cb08caceac3056230
  - path: data/football/full/predictions/squad1/intervention-bidaf-squad1.json
    md5: 2c497299706f75da53fa397fa5a05925
predict-bidaf-on-hotpotqa:
  cmd: mkdir -p data/football/full/predictions/hotpotqa &&allennlp predict models/bidaf-hotpotqa/model.tar.gz
    data/football/full/baseline.json --output-file data/football/full/predictions/hotpotqa/baseline-bidaf-hotpotqa.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/baseline.json data/football/full/predictions/hotpotqa/baseline-bidaf-hotpotqa.json
    && allennlp predict models/bidaf-hotpotqa/model.tar.gz data/football/full/intervention.json
    --output-file data/football/full/predictions/hotpotqa/intervention-bidaf-hotpotqa.json
    --cuda-device 0 --use-dataset-reader --silent &&python main.py convert-allennlp
    data/football/full/intervention.json data/football/full/predictions/hotpotqa/intervention-bidaf-hotpotqa.json
    &&allennlp predict models/bidaf-hotpotqa/model.tar.gz data/football/full/control.json
    --output-file data/football/full/predictions/hotpotqa/control-bidaf-hotpotqa.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/control.json data/football/full/predictions/hotpotqa/control-bidaf-hotpotqa.json
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/bidaf-hotpotqa/model.tar.gz
    md5: 54bd2f115c323be039007c52ac1652df
  outs:
  - path: data/football/full/predictions/hotpotqa/baseline-bidaf-hotpotqa.json
    md5: 2f69ad442d86d1182c05448d6498aa50
  - path: data/football/full/predictions/hotpotqa/control-bidaf-hotpotqa.json
    md5: 4ffd9f3ea8ab89e2845ac3a3ac6e3152
  - path: data/football/full/predictions/hotpotqa/intervention-bidaf-hotpotqa.json
    md5: 91b96960bd5578550d55a98c26536791
predict-bidaf-on-newsqa:
  cmd: mkdir -p data/football/full/predictions/newsqa &&allennlp predict models/bidaf-newsqa/model.tar.gz
    data/football/full/baseline.json --output-file data/football/full/predictions/newsqa/baseline-bidaf-newsqa.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/baseline.json data/football/full/predictions/newsqa/baseline-bidaf-newsqa.json
    && allennlp predict models/bidaf-newsqa/model.tar.gz data/football/full/intervention.json
    --output-file data/football/full/predictions/newsqa/intervention-bidaf-newsqa.json
    --cuda-device 0 --use-dataset-reader --silent &&python main.py convert-allennlp
    data/football/full/intervention.json data/football/full/predictions/newsqa/intervention-bidaf-newsqa.json
    &&allennlp predict models/bidaf-newsqa/model.tar.gz data/football/full/control.json
    --output-file data/football/full/predictions/newsqa/control-bidaf-newsqa.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/control.json data/football/full/predictions/newsqa/control-bidaf-newsqa.json
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/bidaf-newsqa/model.tar.gz
    md5: 111994f0d6926cb9b7a7b682776bcd20
  outs:
  - path: data/football/full/predictions/newsqa/baseline-bidaf-newsqa.json
    md5: 977088e13df74fed86a41b3644fcc207
  - path: data/football/full/predictions/newsqa/control-bidaf-newsqa.json
    md5: 19d10ee8a757289f9edaf61344b20bd3
  - path: data/football/full/predictions/newsqa/intervention-bidaf-newsqa.json
    md5: 1b9d62e371cad3170ee15ffdf71c8adf
predict-bidaf-on-drop:
  cmd: mkdir -p data/football/full/predictions/drop &&allennlp predict models/bidaf-drop/model.tar.gz
    data/football/full/baseline.json --output-file data/football/full/predictions/drop/baseline-bidaf-drop.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/baseline.json data/football/full/predictions/drop/baseline-bidaf-drop.json
    && allennlp predict models/bidaf-drop/model.tar.gz data/football/full/intervention.json
    --output-file data/football/full/predictions/drop/intervention-bidaf-drop.json
    --cuda-device 0 --use-dataset-reader --silent &&python main.py convert-allennlp
    data/football/full/intervention.json data/football/full/predictions/drop/intervention-bidaf-drop.json
    &&allennlp predict models/bidaf-drop/model.tar.gz data/football/full/control.json
    --output-file data/football/full/predictions/drop/control-bidaf-drop.json --cuda-device
    0 --use-dataset-reader --silent && python main.py convert-allennlp data/football/full/control.json
    data/football/full/predictions/drop/control-bidaf-drop.json
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/bidaf-drop/model.tar.gz
    md5: 4836f06e461052b2553a4717bd095326
  outs:
  - path: data/football/full/predictions/drop/baseline-bidaf-drop.json
    md5: 592496d05488311eaed5b4b0f6d928d3
  - path: data/football/full/predictions/drop/control-bidaf-drop.json
    md5: 9ab30c9bdcf992c14c222d366fd0d2ad
  - path: data/football/full/predictions/drop/intervention-bidaf-drop.json
    md5: de3157140d9cb4b600552833fa0a65bd
predict-bidaf-elmo-on-newsqa:
  cmd: mkdir -p data/football/full/predictions/newsqa &&allennlp predict models/bidaf-elmo-newsqa/model.tar.gz
    data/football/full/baseline.json --output-file data/football/full/predictions/newsqa/baseline-bidaf-elmo-newsqa.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/baseline.json data/football/full/predictions/newsqa/baseline-bidaf-elmo-newsqa.json
    && allennlp predict models/bidaf-elmo-newsqa/model.tar.gz data/football/full/intervention.json
    --output-file data/football/full/predictions/newsqa/intervention-bidaf-elmo-newsqa.json
    --cuda-device 0 --use-dataset-reader --silent &&python main.py convert-allennlp
    data/football/full/intervention.json data/football/full/predictions/newsqa/intervention-bidaf-elmo-newsqa.json
    &&allennlp predict models/bidaf-elmo-newsqa/model.tar.gz data/football/full/control.json
    --output-file data/football/full/predictions/newsqa/control-bidaf-elmo-newsqa.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/control.json data/football/full/predictions/newsqa/control-bidaf-elmo-newsqa.json
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/bidaf-elmo-newsqa/model.tar.gz
    md5: 17ba308a2a4c74794b2c4aaef61eea47
  outs:
  - path: data/football/full/predictions/newsqa/baseline-bidaf-elmo-newsqa.json
    md5: 41a6547b23c1a45d3ce3ffddd9c15fa5
  - path: data/football/full/predictions/newsqa/control-bidaf-elmo-newsqa.json
    md5: 665d77ceb2b507af42a4ae463b3fc057
  - path: data/football/full/predictions/newsqa/intervention-bidaf-elmo-newsqa.json
    md5: cdca7bb199f0865fcea7bb76fcac20a0
predict-bidaf-elmo-on-squad1:
  cmd: mkdir -p data/football/full/predictions/squad1 &&allennlp predict models/bidaf-elmo-squad1/model.tar.gz
    data/football/full/baseline.json --output-file data/football/full/predictions/squad1/baseline-bidaf-elmo-squad1.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/baseline.json data/football/full/predictions/squad1/baseline-bidaf-elmo-squad1.json
    && allennlp predict models/bidaf-elmo-squad1/model.tar.gz data/football/full/intervention.json
    --output-file data/football/full/predictions/squad1/intervention-bidaf-elmo-squad1.json
    --cuda-device 0 --use-dataset-reader --silent &&python main.py convert-allennlp
    data/football/full/intervention.json data/football/full/predictions/squad1/intervention-bidaf-elmo-squad1.json
    &&allennlp predict models/bidaf-elmo-squad1/model.tar.gz data/football/full/control.json
    --output-file data/football/full/predictions/squad1/control-bidaf-elmo-squad1.json
    --cuda-device 0 --use-dataset-reader --silent && python main.py convert-allennlp
    data/football/full/control.json data/football/full/predictions/squad1/control-bidaf-elmo-squad1.json
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/bidaf-elmo-squad1/model.tar.gz
    md5: 31bbd958c94accc998437790c3c899f2
  outs:
  - path: data/football/full/predictions/squad1/baseline-bidaf-elmo-squad1.json
    md5: dd986ca4bb2cceddb2f32f1f7b7f143a
  - path: data/football/full/predictions/squad1/control-bidaf-elmo-squad1.json
    md5: 7e3a70d3244abb727e670f24054e3ecc
  - path: data/football/full/predictions/squad1/intervention-bidaf-elmo-squad1.json
    md5: 23615e345e784a6ee688d050852de702
predict-bidaf-elmo-on-drop:
  cmd: mkdir -p data/football/full/predictions/drop &&allennlp predict models/bidaf-elmo-drop/model.tar.gz
    data/football/full/baseline.json --output-file data/football/full/predictions/drop/baseline-bidaf-elmo-drop.json
    --cuda-device 0 --use-dataset-reader --batch-size 80 --silent && python main.py
    convert-allennlp data/football/full/baseline.json data/football/full/predictions/drop/baseline-bidaf-elmo-drop.json
    && allennlp predict models/bidaf-elmo-drop/model.tar.gz data/football/full/intervention.json
    --output-file data/football/full/predictions/drop/intervention-bidaf-elmo-drop.json
    --cuda-device 0 --use-dataset-reader --batch-size 80 --silent &&python main.py
    convert-allennlp data/football/full/intervention.json data/football/full/predictions/drop/intervention-bidaf-elmo-drop.json
    &&allennlp predict models/bidaf-elmo-drop/model.tar.gz data/football/full/control.json
    --output-file data/football/full/predictions/drop/control-bidaf-elmo-drop.json
    --cuda-device 0 --use-dataset-reader --batch-size 80 --silent && python main.py
    convert-allennlp data/football/full/control.json data/football/full/predictions/drop/control-bidaf-elmo-drop.json
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/bidaf-elmo-drop/model.tar.gz
    md5: 8eb723ede46d2951895140ff53ee1f3c
  outs:
  - path: data/football/full/predictions/drop/baseline-bidaf-elmo-drop.json
    md5: dc5d5da150f1af1be2db64c4f12ac816
  - path: data/football/full/predictions/drop/control-bidaf-elmo-drop.json
    md5: 519f4e3d560794ce2c71593258d0ad27
  - path: data/football/full/predictions/drop/intervention-bidaf-elmo-drop.json
    md5: c91fb34dfa5cf377327027cf12fa8808
train-t5-large-on-newsqa:
  cmd: PYTHONPATH=. WANDB_NAME=dvc-t5-large-on-newsqa python scripts/t5.py --model_name_or_path
    t5-large --output_dir models/t5-large-newsqa --train_file data/datasets/newsqa/train.json
    --eval_file data/datasets/newsqa/dev.json --do_train --do_eval --num_workers 8
    --per_device_train_batch_size 2 --gradient_accumulation_steps 512 --save_steps
    74 --logging_steps 10 --learning_rate 0.001 --num_train_epochs 3 --eval_all_checkpoints
    --max_len 1024 --model_parallel 2
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/t5-large-newsqa
    md5: c9cf75a39a4be590f40bc5e42740e31a.dir
train-t5-large-on-squad1:
  cmd: PYTHONPATH=. python scripts/t5.py --model_name_or_path t5-large --output_dir
    models/t5-large-squad1 --train_file data/datasets/squad1/train-v1.1.json --eval_file
    data/datasets/squad1/dev-v1.1.json --do_train --do_eval --num_workers 8 --per_device_train_batch_size
    1 --gradient_accumulation_steps 1024 --save_steps 80 --logging_steps 20 --learning_rate
    1e-4
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/t5-large-squad1
    md5: c67cf6564c58ce96e5b5e2f36c4775c2.dir
train-t5-large-on-hotpotqa:
  cmd: PYTHONPATH='.' WANDB_NAME=dvc-t5-large-on-hotpotqa python scripts/t5.py --model_name_or_path
    t5-large --output_dir models/t5-large-hotpotqa --train_file data/datasets/hotpotqa/train.json
    --eval_file data/datasets/hotpotqa/dev.json --do_train --do_eval --num_workers
    8 --per_device_train_batch_size 1 --gradient_accumulation_steps 1024 --save_steps
    74 --logging_steps 10 --learning_rate 0.001 --num_train_epochs 3 --eval_all_checkpoints
    --max_len 2048 --model_parallel 4
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/t5-large-hotpotqa
    md5: 288b0e4a08fdc639cc859f0ae85c1f61.dir
train-t5-small-on-newsqa:
  cmd: PYTHONPATH=. WANDB_NAME=dvc-t5-small-on-newsqa python scripts/t5.py --model_name_or_path
    t5-small --output_dir models/t5-small-newsqa --train_file data/datasets/newsqa/train.json
    --eval_file data/datasets/newsqa/dev.json --do_train --do_eval --num_workers 8
    --per_device_train_batch_size 8 --gradient_accumulation_steps 128 --save_steps
    74 --logging_steps 10 --learning_rate 0.001 --num_train_epochs 4 --eval_all_checkpoints
    --max_len 1024 --fp16
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/t5-small-newsqa
    md5: da360dc60e303959c98ee8fe6e2eab14.dir
train-t5-small-on-drop:
  cmd: PYTHONPATH=. WANDB_NAME=dvc-t5-small-on-drop python scripts/t5.py --model_name_or_path
    t5-small --output_dir models/t5-small-drop --train_file data/datasets/drop/train.json
    --eval_file data/datasets/drop/dev.json --do_train --do_eval --num_workers 8 --per_device_train_batch_size
    32 --gradient_accumulation_steps 32 --save_steps 74 --logging_steps 10 --learning_rate
    0.001 --num_train_epochs 12 --eval_all_checkpoints --fp16
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/t5-small-drop
    md5: 68690cb9c1e1fa9e0d4005c99aac66eb.dir
train-t5-small-on-hotpotqa:
  cmd: PYTHONPATH=. WANDB_NAME=dvc-t5-small-on-hotpotqa python scripts/t5.py --model_name_or_path
    t5-small --output_dir models/t5-small-hotpotqa --train_file data/datasets/hotpotqa/train.json
    --eval_file data/datasets/hotpotqa/dev.json --do_train --do_eval --num_workers
    8 --per_device_train_batch_size 4 --gradient_accumulation_steps 256 --save_steps
    74 --logging_steps 10 --learning_rate 0.001 --num_train_epochs 3 --eval_all_checkpoints
    --max_len 2048 --fp16
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/t5-small-hotpotqa
    md5: a2abfb696ca893fe5e70a3960405c914.dir
train-t5-base-on-drop:
  cmd: PYTHONPATH=. python scripts/t5.py --model_name_or_path t5-base --output_dir
    models/t5-base-drop --train_file data/datasets/drop/train.json --eval_file data/datasets/drop/dev.json
    --do_train --do_eval --num_workers 8 --per_device_train_batch_size 6 --gradient_accumulation_steps
    170 --save_steps 74 --logging_steps 10 --learning_rate 0.001 --num_train_epochs
    12 --eval_all_checkpoints
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/t5-base-drop
    md5: 2d3d31e9b86e9b007f66e2f758371a7f.dir
train-t5-base-on-newsqa:
  cmd: PYTHONPATH=. WANDB_NAME=dvc-t5-base-on-newsqa python scripts/t5.py --model_name_or_path
    t5-base --output_dir models/t5-base-newsqa --train_file data/datasets/newsqa/train.json
    --eval_file data/datasets/newsqa/dev.json --do_train --do_eval --num_workers 8
    --per_device_train_batch_size 3 --gradient_accumulation_steps 340 --save_steps
    74 --logging_steps 10 --learning_rate 0.001 --num_train_epochs 4 --eval_all_checkpoints
    --max_len 1024
  deps:
  - path: data/datasets/newsqa/dev.json
    md5: 7873ebbb523bff6ad89649fe3d0409d6
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  outs:
  - path: models/t5-base-newsqa
    md5: 38bfdb653538d04004083e177341d2c3.dir
train-t5-base-on-hotpotqa:
  cmd: PYTHONPATH=. WANDB_NAME=dvc-t5-base-on-hotpotqa python scripts/t5.py --model_name_or_path
    t5-base --output_dir models/t5-base-hotpotqa --train_file data/datasets/hotpotqa/train.json
    --eval_file data/datasets/hotpotqa/dev.json --do_train --do_eval --num_workers
    8 --per_device_train_batch_size 1 --gradient_accumulation_steps 1024 --save_steps
    74 --logging_steps 10 --learning_rate 0.001 --num_train_epochs 3 --eval_all_checkpoints
    --max_len 2048
  deps:
  - path: data/datasets/hotpotqa/dev.json
    md5: ca01383e3746f3782d3212d046aa2225
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  outs:
  - path: models/t5-base-hotpotqa
    md5: dfe2e9fcf492088d405300cb71e1304d.dir
train-t5-large-on-drop:
  cmd: PYTHONPATH=. WANDB_NAME=dvc-t5-large-on-drop python scripts/t5.py --model_name_or_path
    t5-large --output_dir models/t5-large-drop --train_file data/datasets/drop/train.json
    --eval_file data/datasets/drop/dev.json --do_train --do_eval --num_workers 8 --per_device_train_batch_size
    1 --gradient_accumulation_steps 1024 --save_steps 74 --logging_steps 10 --learning_rate
    0.001 --num_train_epochs 12
  deps:
  - path: data/datasets/drop/dev.json
    md5: 3e298f54e456bc762f066b14519f9dca
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  outs:
  - path: models/t5-large-drop
    md5: 980b003f1b76d5213143af4431c5cc65.dir
predict-t5-squad1:
  cmd: python main.py --debug t5-predictions data/football/full/baseline.json data/football/full/intervention.json
    data/football/full/control.json --model-path models/t5-small-squad1 --model-path
    models/t5-base-squad1 --model-path models/t5-large-squad1 --out-folder data/football/full/predictions/squad1
    --max-answer-length 10
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/t5-base-squad1
    md5: b339808496d3c739ae93dcf1e4aef5ea.dir
  - path: models/t5-large-squad1
    md5: c67cf6564c58ce96e5b5e2f36c4775c2.dir
  - path: models/t5-small-squad1
    md5: 8c1715252272ed2d3b9cef486fdbcba0.dir
  outs:
  - path: data/football/full/predictions/squad1/baseline-t5-base-squad1.json
    md5: 4259935890126b1a9c6d136a931d588b
  - path: data/football/full/predictions/squad1/baseline-t5-large-squad1.json
    md5: 78d9bc84eb35cf88e6d10c7bbe66e174
  - path: data/football/full/predictions/squad1/baseline-t5-small-squad1.json
    md5: 0d77497f5eb577f9090cd14d5be7de83
  - path: data/football/full/predictions/squad1/control-t5-base-squad1.json
    md5: adb6c98100666fe6f753b35bfc4cc2f4
  - path: data/football/full/predictions/squad1/control-t5-large-squad1.json
    md5: 4e962a402d48895b13eaa3e724b2bf94
  - path: data/football/full/predictions/squad1/control-t5-small-squad1.json
    md5: 1b2c0bc3ac022ce07c0469709700c25e
  - path: data/football/full/predictions/squad1/intervention-t5-base-squad1.json
    md5: 33d4e551780989e02aedc86980a1d963
  - path: data/football/full/predictions/squad1/intervention-t5-large-squad1.json
    md5: 7fbefc801af889c2012de2314036744b
  - path: data/football/full/predictions/squad1/intervention-t5-small-squad1.json
    md5: 03a58f7e4d6803266eeaae9debac8648
predict-t5-hotpotqa:
  cmd: python main.py --debug t5-predictions data/football/full/baseline.json data/football/full/intervention.json
    data/football/full/control.json --model-path models/t5-small-hotpotqa --model-path
    models/t5-base-hotpotqa --model-path models/t5-large-hotpotqa --out-folder data/football/full/predictions/hotpotqa
    --max-answer-length 10
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/t5-base-hotpotqa
    md5: dfe2e9fcf492088d405300cb71e1304d.dir
  - path: models/t5-large-hotpotqa
    md5: 288b0e4a08fdc639cc859f0ae85c1f61.dir
  - path: models/t5-small-hotpotqa
    md5: a2abfb696ca893fe5e70a3960405c914.dir
  outs:
  - path: data/football/full/predictions/hotpotqa/baseline-t5-base-hotpotqa.json
    md5: e28f4cc83bc8b12801017acb1093d21c
  - path: data/football/full/predictions/hotpotqa/baseline-t5-large-hotpotqa.json
    md5: 74166cbd0050b303c8edb6b239999420
  - path: data/football/full/predictions/hotpotqa/baseline-t5-small-hotpotqa.json
    md5: 947002bba1082a48b58e8cfcc1f9acb5
  - path: data/football/full/predictions/hotpotqa/control-t5-base-hotpotqa.json
    md5: f46e6c7c60c078d7c292d06e51c7f931
  - path: data/football/full/predictions/hotpotqa/control-t5-large-hotpotqa.json
    md5: a017d1dc1bb762ca46d62963032c19ee
  - path: data/football/full/predictions/hotpotqa/control-t5-small-hotpotqa.json
    md5: e89e9f3da65c77cae49ba00a3830d27d
  - path: data/football/full/predictions/hotpotqa/intervention-t5-base-hotpotqa.json
    md5: cb7a2c8ef4e22540d2ba0322643f8aaa
  - path: data/football/full/predictions/hotpotqa/intervention-t5-large-hotpotqa.json
    md5: 2b54a3d87f0d1413ff19f4abde46bdd7
  - path: data/football/full/predictions/hotpotqa/intervention-t5-small-hotpotqa.json
    md5: 1e46b7ac8c0c80eab017d58a5a071e5e
predict-t5-drop:
  cmd: python main.py --debug t5-predictions data/football/full/baseline.json data/football/full/intervention.json
    data/football/full/control.json --model-path models/t5-small-drop --model-path
    models/t5-base-drop --model-path models/t5-large-drop --out-folder data/football/full/predictions/drop
    --max-answer-length 10
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/t5-base-drop
    md5: 2d3d31e9b86e9b007f66e2f758371a7f.dir
  - path: models/t5-large-drop
    md5: 980b003f1b76d5213143af4431c5cc65.dir
  - path: models/t5-small-drop
    md5: 68690cb9c1e1fa9e0d4005c99aac66eb.dir
  outs:
  - path: data/football/full/predictions/drop/baseline-t5-base-drop.json
    md5: 7a1eeeca1d02c06e75b47fbaa2943685
  - path: data/football/full/predictions/drop/baseline-t5-large-drop.json
    md5: a5cf69cdcad92cbb797791fc0a5fe371
  - path: data/football/full/predictions/drop/baseline-t5-small-drop.json
    md5: 2f6b5c4a8de396e49ec599689ec8ce62
  - path: data/football/full/predictions/drop/control-t5-base-drop.json
    md5: f75d5726cae6c1e9b87bb7d5dcc65f48
  - path: data/football/full/predictions/drop/control-t5-large-drop.json
    md5: 4985c74b073ef3b2c483823262da2eb1
  - path: data/football/full/predictions/drop/control-t5-small-drop.json
    md5: f02bbb2b24c69097fdc16735c1c7eba1
  - path: data/football/full/predictions/drop/intervention-t5-base-drop.json
    md5: cfbb5af29fe30774b3f6851422254764
  - path: data/football/full/predictions/drop/intervention-t5-large-drop.json
    md5: 3598ed31395727b0c4f3f9ddfd78ef38
  - path: data/football/full/predictions/drop/intervention-t5-small-drop.json
    md5: efdc728156442dae9ab9ac1052d165c6
predict-t5-newsqa:
  cmd: python main.py --debug t5-predictions data/football/full/baseline.json data/football/full/intervention.json
    data/football/full/control.json --model-path models/t5-small-newsqa --model-path
    models/t5-base-newsqa --model-path models/t5-large-newsqa --out-folder data/football/full/predictions/newsqa
    --max-answer-length 10
  deps:
  - path: data/football/full/baseline.json
    md5: a1b261d06fa1c86976e73b1695319434
  - path: data/football/full/control.json
    md5: 528a2f3ed6dc0330b82d33fc99f78a90
  - path: data/football/full/intervention.json
    md5: 5897df44e42021090e3b9b89b44c6e90
  - path: models/t5-base-newsqa
    md5: 38bfdb653538d04004083e177341d2c3.dir
  - path: models/t5-large-newsqa
    md5: c9cf75a39a4be590f40bc5e42740e31a.dir
  - path: models/t5-small-newsqa
    md5: da360dc60e303959c98ee8fe6e2eab14.dir
  outs:
  - path: data/football/full/predictions/newsqa/baseline-t5-base-newsqa.json
    md5: 970030f476e68a3dfb9ff032b0a53b41
  - path: data/football/full/predictions/newsqa/baseline-t5-large-newsqa.json
    md5: 9c506ae828210834bed8d94248f80340
  - path: data/football/full/predictions/newsqa/baseline-t5-small-newsqa.json
    md5: 596c31156312181a23072473b54ac9a9
  - path: data/football/full/predictions/newsqa/control-t5-base-newsqa.json
    md5: bdd8539d8aa26b6e903cc55aa8a2f0d1
  - path: data/football/full/predictions/newsqa/control-t5-large-newsqa.json
    md5: 15e8466c539df58c2d12461128debce9
  - path: data/football/full/predictions/newsqa/control-t5-small-newsqa.json
    md5: 9b788b0b0ca1862aa51daaadc7e833b8
  - path: data/football/full/predictions/newsqa/intervention-t5-base-newsqa.json
    md5: eebe1a6a42e4081defafe4f23b542507
  - path: data/football/full/predictions/newsqa/intervention-t5-large-newsqa.json
    md5: c5a0ea4649590f7bb25a746294283035
  - path: data/football/full/predictions/newsqa/intervention-t5-small-newsqa.json
    md5: 264ab3a3db436f6b0e1359934d174ce4
combine-datasets:
  cmd: python main.py combine data/datasets/drop/train.json data/datasets/hotpotqa/train.json
    data/datasets/newsqa/train.json data/datasets/squad1/train-v1.1.json data/datasets/combined/train.json
    --sub-sample 22500
  deps:
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: data/datasets/combined/train.json
    md5: ca684dec3f1d4166f6645e4780a71f35
train-albert-xlarge-v2-on-combined:
  cmd: MODEL=albert-xlarge-v2 CACHE_LOCATION=/mnt/iusers01/gb01/z07959vs/localscratch/combined/
    SAVE_TO=models/albert-xlarge-v2-combined BATCH_SIZE=4 ACC_STEPS=64 MODEL_TYPE=albert
    bash scripts/cache_and_train_combined.sh
  deps:
  - path: data/datasets/combined/train.json
    md5: ca684dec3f1d4166f6645e4780a71f35
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  outs:
  - path: models/albert-xlarge-v2-combined
    md5: 8d073e6c26c38ebb63c030a6792f50ff.dir
combine-datasets-full:
  cmd: python main.py combine data/datasets/drop/train.json data/datasets/hotpotqa/train.json
    data/datasets/newsqa/train.json data/datasets/squad1/train-v1.1.json data/datasets/combined/train-full.json
  deps:
  - path: data/datasets/drop/train.json
    md5: 633ef4403ee8b9d2084d45057defe3f0
  - path: data/datasets/hotpotqa/train.json
    md5: f085e98b5251f96490622c11af481c75
  - path: data/datasets/newsqa/train.json
    md5: e52440d449ce02486ac48507889bfc2e
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: data/datasets/combined/train-full.json
    md5: d94dffb07139ff5c00f465b6e283f6d5
