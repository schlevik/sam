train-roberta-base-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path roberta-base --model-type roberta --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/roberta-base-squad1 --do-eval-after-training --num-workers
    8 --fp16 --per-gpu-train-batch-size 8 --save-steps 0 --max-answer-length 30 --debug-features
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/roberta-base-squad1
    md5: 223be1b1d0dba22ed9985bc1e200295e.dir
train-albert-base-v2-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path albert-base-v2 --model-type albert-base-v2 --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/albert-base-v2-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 24 --max-answer-length 30 --fp16 --save-steps 0 --debug-features
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  - path: scripts/train_transformers.py
    md5: b9df7e61041c54dfcf1fdc544fa86b9b
  outs:
  - path: models/albert-base-v2-squad1
    md5: ace9c8af69f8e73d97deac6a76c1d2a1.dir
train-albert-xxlarge-v2-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path albert-xxlarge-v2 --model-type albert-xxlarge-v2 --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/albert-xxlarge-v2-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 2 --max-answer-length 30 --gradient-accumulation-steps
    128 --fp16 --save-steps 0 --debug-features
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/albert-xxlarge-v2-squad1
    md5: ab4909936dc0ca044d631f0bf6408068.dir
train-bert-large-uncased-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path bert-large-uncased --model-type bert-large-uncased --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/bert-large-uncased-squad1 --do-eval-after-training
    --num-workers 8 --per-gpu-train-batch-size 2 --max-answer-length 30 --gradient-accumulation-steps
    128 --fp16 --save-steps 0 --debug-features
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/bert-large-uncased-squad1
    md5: 6ed53ddb2075786fffd3ea6530c8c506.dir
train-roberta-large-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path roberta-large --model-type roberta-large --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/roberta-large-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 8 --max-answer-length 30 --gradient-accumulation-steps
    32 --fp16 --save-steps 1000 --debug-features --eval-all-checkpoints
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/roberta-large-squad1
    md5: ec9a2c9e6e83cfc2dfa906623949fe06.dir
train-albert-large-v2-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path albert-large-v2 --model-type albert-large-v2 --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/albert-large-v2-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 8 --max-answer-length 30 --gradient-accumulation-steps
    32 --fp16 --debug-features --eval-all-checkpoints
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/albert-large-v2-squad1
    md5: d125f85b6cd80c44f1b1b8034c39740c.dir
train-albert-xlarge-v2-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path albert-xlarge-v2 --model-type albert-xlarge-v2 --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/albert-xlarge-v2-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 4 --max-answer-length 30 --gradient-accumulation-steps
    64 --fp16 --debug-features --eval-all-checkpoints
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/albert-xlarge-v2-squad1
    md5: c4db834be68c60375f5d72336b905502.dir
train-bert-base-uncased-on-squad1:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/datasets/squad1/train-v1.1.json
    --model-path bert-base-uncased --model-type bert-base-uncased --eval-file data/datasets/squad1/dev-v1.1.json
    --save-model-folder models/bert-base-uncased-squad1 --do-eval-after-training --num-workers
    8 --per-gpu-train-batch-size 32 --max-answer-length 30 --gradient-accumulation-steps
    8 --fp16 --debug-features --eval-all-checkpoints
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/bert-base-uncased-squad1
    md5: 0bc609c29bbd02bef8fce079fa320f6a.dir
train-t5-small-on-squad1:
  cmd: PYTHONPATH=. python scripts/t5.py --model_name_or_path t5-small --output_dir
    models/t5-small-squad1 --train_file data/datasets/squad1/train-v1.1.json --eval_file
    data/datasets/squad1/dev-v1.1.json --do_train --do_eval --num_workers 8 --per_device_train_batch_size
    8 --gradient_accumulation_steps 32 --fp16
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/t5-small-squad1
    md5: fa98a47de4001ccfac343c46fa102cf0.dir
train-t5-base-on-squad1:
  cmd: PYTHONPATH=. python scripts/t5.py --model_name_or_path t5-base --output_dir
    models/t5-base-squad1 --train_file data/datasets/squad1/train-v1.1.json --eval_file
    data/datasets/squad1/dev-v1.1.json --do_train --do_eval --num_workers 8 --per_device_train_batch_size
    8 --gradient_accumulation_steps 32 --fp16
  deps:
  - path: data/datasets/squad1/dev-v1.1.json
    md5: 3e85deb501d4e538b6bc56f786231552
  - path: data/datasets/squad1/train-v1.1.json
    md5: 981b29407e0affa3b1b156f72073b945
  outs:
  - path: models/t5-base-squad1
    md5: e63973c51d64d43a671729b68588a281.dir
generate-train:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 56 --num-workers
    8 --do-save --out-path data/football/split/train/ --multiplier 100 --split train
    --combine
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split/train/combined-train.json
    md5: 70d3af4b992c9ecf2bd01bd3403b15c0
generate-train-mask-q:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 56 --num-workers
    8 --do-save --out-path data/football/split-mask-q/train/ --multiplier 100 --split
    train --combine --mask-q
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split-mask-q/train/combined-train.json
    md5: 29fd16f574d0363a8f457f9e873a1c27
generate-train-mask-p:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 56 --num-workers
    8 --do-save --out-path data/football/split-mask-p/train/ --multiplier 100 --split
    train --combine --mask-p --keep-answer-candidates
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split-mask-p/train/combined-train.json
    md5: f1dd5ed6cc05287d05b77e04fe99d805
generate-test-mask-q:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 38676 --num-workers
    8 --do-save --out-path data/football/split-mask-q/test/ --multiplier 20 --split
    test --mask-q
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split-mask-q/test/baseline-test.json
    md5: 63d660205ba99e2c9330e7d1e63e15b1
  - path: data/football/split-mask-q/test/control-test.json
    md5: 875aed3a9069ff649c418d95e4d7b57d
  - path: data/football/split-mask-q/test/intervention-test.json
    md5: 2fe124d70a610917c2f6ad6c26b6f9ff
generate-test-mask-p:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 38676 --num-workers
    8 --do-save --out-path data/football/split-mask-p/test/ --multiplier 20 --split
    test --mask-p --keep-answer-candidates
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split-mask-p/test/baseline-test.json
    md5: ed9e5c7fc588a0f4726e82c12edcf95f
  - path: data/football/split-mask-p/test/control-test.json
    md5: 24b3f1207449f5ad6a5403ad69bd5f6e
  - path: data/football/split-mask-p/test/intervention-test.json
    md5: 0546a3f31510080ed9795210a5799ff7
train-bert-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/football/split/train/combined-train.json
    --model-path bert-base-uncased --model-type bert --save-model-folder models/bert-baseline
    --num-workers 8 --per-gpu-train-batch-size 24 --max-answer-length 10 --debug-features
    --num-train-epochs 15 --overwrite-output-dir --save-steps 0 --per-gpu-eval-batch-size
    64 --gradient-accumulation-steps 3 --learning-rate 5e-5
  deps:
  - path: data/football/split/train/combined-train.json
    md5: 70d3af4b992c9ecf2bd01bd3403b15c0
  outs:
  - path: models/bert-baseline
    md5: 3c0dfec47e611a376084aa9f7541f5ad.dir
train-bert-mask-q-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/football/split-mask-q/train/combined-train.json
    --model-path bert-base-uncased --model-type bert --save-model-folder models/bert-mask-q-baseline
    --num-workers 8 --per-gpu-train-batch-size 24 --max-answer-length 10 --debug-features
    --num-train-epochs 15 --overwrite-output-dir --save-steps 0 --per-gpu-eval-batch-size
    64 --gradient-accumulation-steps 3 --learning-rate 5e-5
  deps:
  - path: data/football/split-mask-q/train/combined-train.json
    md5: 29fd16f574d0363a8f457f9e873a1c27
  outs:
  - path: models/bert-mask-q-baseline
    md5: ab6a3d3cbca3bc6e0c56da8b6e0d35e1.dir
train-bert-mask-p-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk train data/football/split-mask-p/train/combined-train.json
    --model-path bert-base-uncased --model-type bert --save-model-folder models/bert-mask-p-baseline
    --num-workers 8 --per-gpu-train-batch-size 24 --max-answer-length 10 --debug-features
    --num-train-epochs 15 --overwrite-output-dir --save-steps 0 --per-gpu-eval-batch-size
    64 --gradient-accumulation-steps 3 --learning-rate 5e-5
  deps:
  - path: data/football/split-mask-p/train/combined-train.json
    md5: f1dd5ed6cc05287d05b77e04fe99d805
  outs:
  - path: models/bert-mask-p-baseline
    md5: 416506bd1b6cd5414dfd6a494469e9c6.dir
predict-random-baselines:
  cmd: python main.py predict data/football/split/test/baseline-test.json data/football/split/test/control-test.json
    data/football/split/test/intervention-test.json --output-folder data/football/split/test/predictions/
    --model random-baseline --cls RandomBaseline --model educated-baseline --cls EducatedBaseline
    --model informed-baseline --cls InformedBaseline
  deps:
  - path: data/football/split/test/baseline-test.json
    md5: dd4270113e8c4df1d87952704174b327
  - path: data/football/split/test/control-test.json
    md5: 21b540d35dc9a921efad2a96ef7fff72
  - path: data/football/split/test/intervention-test.json
    md5: 397e7a8e463ddf1d144193a8689c2875
  outs:
  - path: data/football/split/test/predictions/baseline-test-educated-baseline.json
    md5: 12c8c9005320ad4e849b468292a95b4c
  - path: data/football/split/test/predictions/baseline-test-informed-baseline.json
    md5: eb4ebd14e97115a8c71781862235f0a8
  - path: data/football/split/test/predictions/baseline-test-random-baseline.json
    md5: 6eef993984684bc2ecd5d68221918877
  - path: data/football/split/test/predictions/control-test-educated-baseline.json
    md5: 8603a8dba61c00493336e51569d235fd
  - path: data/football/split/test/predictions/control-test-informed-baseline.json
    md5: 0db12b23a7fadd8fcba4d003614abc0a
  - path: data/football/split/test/predictions/control-test-random-baseline.json
    md5: 2c629242cf401eb6231909ed99d9b7d9
  - path: data/football/split/test/predictions/intervention-test-educated-baseline.json
    md5: b7bd21be9eca161c6652d2661ce23057
  - path: data/football/split/test/predictions/intervention-test-informed-baseline.json
    md5: d3deb12ffdcaca070073b8fa7f0bf319
  - path: data/football/split/test/predictions/intervention-test-random-baseline.json
    md5: 312e2f4f92307d65cab7563cc10c3b4e
predict-bert-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk predictions
    data/football/split/test/baseline-test.json data/football/split/test/intervention-test.json
    data/football/split/test/control-test.json --model-path models/bert-baseline --model-type
    bert --out-folder data/football/split/test/predictions/ --max-answer-length 10
    --per-gpu-eval-batch-size 64
  deps:
  - path: data/football/split/test/baseline-test.json
    md5: dd4270113e8c4df1d87952704174b327
  - path: data/football/split/test/control-test.json
    md5: 21b540d35dc9a921efad2a96ef7fff72
  - path: data/football/split/test/intervention-test.json
    md5: 397e7a8e463ddf1d144193a8689c2875
  - path: models/bert-baseline
    md5: 3c0dfec47e611a376084aa9f7541f5ad.dir
  outs:
  - path: data/football/split/test/predictions/baseline-test-bert-baseline.json
    md5: a6fde403333da209b7a8342b1188afe0
  - path: data/football/split/test/predictions/control-test-bert-baseline.json
    md5: 8e3c0a8475665bbfa92466e1a7dfcc4d
  - path: data/football/split/test/predictions/intervention-test-bert-baseline.json
    md5: 1583304f8e292495282d9ab2cb3edd27
predict-bert-mask-q-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk predictions
    data/football/split-mask-q/test/baseline-test.json data/football/split-mask-q/test/intervention-test.json
    data/football/split-mask-q/test/control-test.json --model-path models/bert-mask-q-baseline
    --model-type bert --out-folder data/football/split-mask-q/test/predictions/ --max-answer-length
    10 --per-gpu-eval-batch-size 64
  deps:
  - path: data/football/split-mask-q/test/baseline-test.json
    md5: 63d660205ba99e2c9330e7d1e63e15b1
  - path: data/football/split-mask-q/test/control-test.json
    md5: 875aed3a9069ff649c418d95e4d7b57d
  - path: data/football/split-mask-q/test/intervention-test.json
    md5: 2fe124d70a610917c2f6ad6c26b6f9ff
  - path: models/bert-mask-q-baseline
    md5: ab6a3d3cbca3bc6e0c56da8b6e0d35e1.dir
  outs:
  - path: data/football/split-mask-q/test/predictions/baseline-test-bert-mask-q-baseline.json
    md5: 8a33f7f81d61410632a2545f2e881122
  - path: data/football/split-mask-q/test/predictions/control-test-bert-mask-q-baseline.json
    md5: a4aaf4058cefc9ccf3d5ca637f3537e0
  - path: data/football/split-mask-q/test/predictions/intervention-test-bert-mask-q-baseline.json
    md5: bcd09ddaacc23e212c5d798a813305b9
predict-bert-mask-p-baseline:
  cmd: python main.py --debug --notify viktor.schlegel@manchester.ac.uk predictions
    data/football/split-mask-p/test/baseline-test.json data/football/split-mask-p/test/intervention-test.json
    data/football/split-mask-p/test/control-test.json --model-path models/bert-mask-p-baseline
    --model-type bert --out-folder data/football/split-mask-p/test/predictions/ --max-answer-length
    10 --per-gpu-eval-batch-size 64
  deps:
  - path: data/football/split-mask-p/test/baseline-test.json
    md5: ed9e5c7fc588a0f4726e82c12edcf95f
  - path: data/football/split-mask-p/test/control-test.json
    md5: 24b3f1207449f5ad6a5403ad69bd5f6e
  - path: data/football/split-mask-p/test/intervention-test.json
    md5: 0546a3f31510080ed9795210a5799ff7
  - path: models/bert-mask-p-baseline
    md5: 416506bd1b6cd5414dfd6a494469e9c6.dir
  outs:
  - path: data/football/split-mask-p/test/predictions/baseline-test-bert-mask-p-baseline.json
    md5: 38d30b07469e2b4341fc42bc74679d9b
  - path: data/football/split-mask-p/test/predictions/control-test-bert-mask-p-baseline.json
    md5: 0df0efc58caf5525d47b9592c2f6c341
  - path: data/football/split-mask-p/test/predictions/intervention-test-bert-mask-p-baseline.json
    md5: c0ed0f855aebf5cf097a8c1f79c0a354
generate-test:
  cmd: python main.py generate-balanced --config conf/finetune.json --seed 38676 --num-workers
    8 --do-save --out-path data/football/split/test/ --multiplier 20 --split test
  deps:
  - path: conf/finetune.json
    md5: 0ff738ae9e4a22177eb61662d82f8698
  - path: scripts/generate_balanced.py
    md5: c9ae2d226352dd1c934cff644698a2d7
  outs:
  - path: data/football/split/test/baseline-test.json
    md5: dd4270113e8c4df1d87952704174b327
  - path: data/football/split/test/control-test.json
    md5: 21b540d35dc9a921efad2a96ef7fff72
  - path: data/football/split/test/intervention-test.json
    md5: 397e7a8e463ddf1d144193a8689c2875
